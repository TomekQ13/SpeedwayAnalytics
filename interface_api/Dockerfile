FROM python:3.8
RUN pip install pipenv

ENV PROJECT_DIR /interface_api
ENV FLASK_APP run.py

ENV DATABASE_USER ${DATABASE_USER}
ENV DATABASE_PASSWORD ${DATABASE_PASSWORD}
ENV DATABASE_HOST ${DATABASE_HOST}
ENV DATABASE_PORT ${DATABASE_PORT}
ENV DATABASE_DATABASE ${DATABASE_DATABASE}

COPY Pipfile Pipfile.lock ${PROJECT_DIR}/
WORKDIR ${PROJECT_DIR}/
RUN pipenv install --system --deploy
COPY . .

CMD flask run --host=0.0.0.0